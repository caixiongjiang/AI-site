<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŸ¥è¯†åº“é—®ç­”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #1A1A1A;
            color: #E0E0E0;
            overflow: hidden;
        }

        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 60px;
            height: 100vh;
            background: #252526;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px 0;
            z-index: 1000;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, #00B36B, #00D980);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            cursor: pointer;
        }

        .nav-items {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .nav-item {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .nav-item:hover {
            background: rgba(0, 179, 107, 0.1);
        }

        .nav-item.active {
            background: rgba(0, 179, 107, 0.2);
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: -10px;
            width: 3px;
            height: 20px;
            background: #00B36B;
            border-radius: 0 3px 3px 0;
        }

        .nav-icon {
            font-size: 20px;
        }

        .nav-bottom {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* ä¸»å¸ƒå±€ */
        .main-layout {
            margin-left: 60px;
            height: 100vh;
            display: flex;
            position: relative;
        }

        /* å·¦ä¾§é¢æ¿ï¼šçŸ¥è¯†åº“åˆ—è¡¨ */
        .left-panel {
            width: 280px;
            background: #1E1E1E;
            border-right: 1px solid #333;
            display: flex;
            flex-direction: column;
            flex-shrink: 0;
        }

        .panel-header {
            padding: 20px;
            border-bottom: 1px solid #333;
        }

        .panel-title {
            font-size: 18px;
            color: #E0E0E0;
            margin-bottom: 16px;
        }

        .search-box {
            background: #252526;
            border-radius: 8px;
            padding: 10px 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .search-box:focus-within {
            border-color: #00B36B;
        }

        .search-icon {
            color: #888;
            font-size: 16px;
        }

        .search-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #E0E0E0;
            font-size: 13px;
        }

        .search-input::placeholder {
            color: #666;
        }

        /* çŸ¥è¯†åº“åˆ—è¡¨ */
        .knowledge-list {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
        }

        .kb-item {
            padding: 14px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            background: #252526;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .kb-item:hover {
            background: #2A2A2A;
        }

        .kb-item.active {
            background: rgba(0, 179, 107, 0.15);
            border-left: 3px solid #00B36B;
        }

        .kb-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .kb-info {
            flex: 1;
            min-width: 0;
        }

        .kb-name {
            font-size: 14px;
            color: #E0E0E0;
            margin-bottom: 4px;
            font-weight: 500;
        }

        .kb-meta {
            font-size: 11px;
            color: #888;
        }

        /* ä¸­é—´é¢æ¿ï¼šæ–‡ä»¶åˆ—è¡¨æˆ–æ–‡æ¡£å†…å®¹ */
        .middle-panel {
            flex: 1;
            background: #1A1A1A;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transition: margin-right 0.3s ease;
        }

        .middle-panel.with-chat {
            margin-right: 420px;
        }

        /* ä¸­é—´é¢æ¿å¤´éƒ¨ */
        .middle-header {
            padding: 20px 30px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .middle-title {
            font-size: 20px;
            color: #E0E0E0;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #888;
            margin-top: 6px;
        }

        .breadcrumb-link {
            color: #00B36B;
            cursor: pointer;
            transition: color 0.2s;
        }

        .breadcrumb-link:hover {
            color: #00D980;
        }

        .breadcrumb-separator {
            color: #666;
        }

        .middle-actions {
            display: flex;
            gap: 12px;
        }

        .action-btn {
            background: #252526;
            border: 1px solid #333;
            color: #E0E0E0;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #2A2A2A;
            border-color: #00B36B;
        }

        .action-btn.primary {
            background: #00B36B;
            border-color: #00B36B;
            color: white;
        }

        .action-btn.primary:hover {
            background: #00D980;
        }

        /* ä¸­é—´å†…å®¹åŒº */
        .middle-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        /* æ¬¢è¿çŠ¶æ€ */
        .welcome-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
        }

        .welcome-icon {
            font-size: 72px;
            margin-bottom: 24px;
            opacity: 0.6;
        }

        .welcome-title {
            font-size: 24px;
            color: #E0E0E0;
            margin-bottom: 12px;
        }

        .welcome-text {
            font-size: 14px;
            color: #888;
            line-height: 1.6;
        }

        /* æ–‡ä»¶åˆ—è¡¨è§†å›¾ */
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 16px;
        }

        .file-card {
            background: #252526;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .file-card:hover {
            border-color: #00B36B;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 179, 107, 0.15);
        }

        .file-card-icon {
            font-size: 36px;
        }

        .file-card-name {
            font-size: 14px;
            color: #E0E0E0;
            font-weight: 500;
            word-break: break-all;
        }

        .file-card-meta {
            font-size: 12px;
            color: #888;
            display: flex;
            justify-content: space-between;
        }

        /* æ–‡æ¡£å†…å®¹è§†å›¾ */
        .document-view {
            max-width: 900px;
            margin: 0 auto;
        }

        .document-header {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        .document-title {
            font-size: 28px;
            color: #E0E0E0;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .document-icon {
            font-size: 32px;
        }

        .document-meta {
            display: flex;
            gap: 20px;
            font-size: 13px;
            color: #888;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .document-content {
            background: #252526;
            border-radius: 12px;
            padding: 30px;
            line-height: 1.8;
            font-size: 14px;
            color: #C0C0C0;
            margin-bottom: 30px;
        }

        .document-content h1,
        .document-content h2,
        .document-content h3 {
            color: #E0E0E0;
            margin-top: 24px;
            margin-bottom: 12px;
        }

        .document-content h1 {
            font-size: 22px;
        }

        .document-content h2 {
            font-size: 18px;
        }

        .document-content h3 {
            font-size: 16px;
        }

        .document-content p {
            margin-bottom: 16px;
        }

        .ask-btn-container {
            position: sticky;
            bottom: 30px;
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .ask-xiaocai-btn {
            background: linear-gradient(135deg, #00B36B, #00D980);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 50px;
            font-size: 15px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 16px rgba(0, 179, 107, 0.3);
            transition: all 0.3s;
        }

        .ask-xiaocai-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px rgba(0, 179, 107, 0.4);
        }

        .ask-xiaocai-btn:active {
            transform: translateY(0);
        }

        /* å³ä¾§é—®ç­”ä¾§è¾¹æ  */
        .chat-sidebar {
            position: fixed;
            right: 0;
            top: 0;
            width: 420px;
            height: 100vh;
            background: #1E1E1E;
            border-left: 1px solid #333;
            display: flex;
            flex-direction: column;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 900;
            box-shadow: -4px 0 24px rgba(0, 0, 0, 0.3);
        }

        .chat-sidebar.show {
            transform: translateX(0);
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-title-area {
            flex: 1;
        }

        .chat-title {
            font-size: 16px;
            color: #E0E0E0;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chat-subtitle {
            font-size: 12px;
            color: #888;
        }

        .close-chat-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: transparent;
            border: none;
            color: #888;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-size: 18px;
        }

        .close-chat-btn:hover {
            background: rgba(255, 107, 107, 0.2);
            color: #FF6B6B;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* æ¶ˆæ¯æ°”æ³¡ */
        .message {
            display: flex;
            gap: 10px;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .message-avatar.bot {
            background: linear-gradient(135deg, #00B36B, #00D980);
        }

        .message-avatar.user {
            background: #333;
        }

        .message-content {
            flex: 1;
        }

        .message-bubble {
            background: #252526;
            border-radius: 10px;
            padding: 12px 14px;
            line-height: 1.6;
            font-size: 13px;
            color: #E0E0E0;
        }

        .message.user .message-bubble {
            background: rgba(0, 179, 107, 0.15);
        }

        .message-time {
            font-size: 10px;
            color: #666;
            margin-top: 4px;
            margin-left: 4px;
        }

        .message-reference {
            margin-top: 8px;
            background: rgba(0, 179, 107, 0.08);
            border-left: 3px solid #00B36B;
            border-radius: 0 6px 6px 0;
            padding: 8px 12px;
            font-size: 11px;
            color: #00D980;
        }

        /* è¾“å…¥åŒºåŸŸ */
        .chat-input-area {
            padding: 16px;
            border-top: 1px solid #333;
        }

        .chat-input-wrapper {
            background: #252526;
            border-radius: 12px;
            border: 2px solid transparent;
            padding: 10px 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .chat-input-wrapper:focus-within {
            border-color: #00B36B;
        }

        .chat-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: #E0E0E0;
            font-size: 13px;
            font-family: inherit;
            resize: none;
            max-height: 100px;
        }

        .chat-input::placeholder {
            color: #666;
        }

        .chat-send-btn {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            background: #00B36B;
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }

        .chat-send-btn:hover {
            background: #00D980;
        }
    </style>
</head>
<body>
    <!-- å·¦ä¾§å¯¼èˆªæ  -->
    <div class="sidebar">
        <div class="user-avatar" title="ç”¨æˆ·ä¸­å¿ƒ">
            <span style="color: white; font-weight: bold;">è”¡</span>
        </div>

        <div class="nav-items">
            <div class="nav-item" title="é¦–é¡µ" onclick="location.href='index.html'">
                <span class="nav-icon">ğŸ </span>
            </div>
            <div class="nav-item" title="Agentåº”ç”¨" onclick="location.href='agent-center.html'">
                <span class="nav-icon">ğŸ¤–</span>
            </div>
            <div class="nav-item active" title="çŸ¥è¯†åº“">
                <span class="nav-icon">ğŸ“š</span>
            </div>
        </div>

        <div class="nav-bottom">
            <div class="nav-item" title="è®¾ç½®">
                <span class="nav-icon">âš™ï¸</span>
            </div>
            <div class="nav-item" title="å¸®åŠ©">
                <span class="nav-icon">â“</span>
            </div>
            <div class="nav-item" title="ä½œè€…ç®€ä»‹" onclick="alert('ä½œè€…ç®€ä»‹åŠŸèƒ½')">
                <span class="nav-icon">â„¹ï¸</span>
            </div>
        </div>
    </div>

    <!-- ä¸»å¸ƒå±€ -->
    <div class="main-layout">
        <!-- å·¦ä¾§é¢æ¿ï¼šçŸ¥è¯†åº“åˆ—è¡¨ -->
        <div class="left-panel">
            <div class="panel-header">
                <div class="panel-title">çŸ¥è¯†åº“</div>
                <div class="search-box">
                    <span class="search-icon">ğŸ”</span>
                    <input type="text" class="search-input" placeholder="æœç´¢çŸ¥è¯†åº“...">
                </div>
            </div>

            <div class="knowledge-list">
                <div class="kb-item active" onclick="selectKB(this, 'å…¬å¸æ³•åŠ¡å…±äº«åº“', 'ğŸ“š', 125)">
                    <span class="kb-icon">ğŸ“š</span>
                    <div class="kb-info">
                        <div class="kb-name">å…¬å¸æ³•åŠ¡å…±äº«åº“</div>
                        <div class="kb-meta">125ä¸ªæ–‡ä»¶ Â· 2å¤©å‰</div>
                    </div>
                </div>

                <div class="kb-item" onclick="selectKB(this, 'æŠ€æœ¯æ–‡æ¡£åº“', 'ğŸ’¼', 89)">
                    <span class="kb-icon">ğŸ’¼</span>
                    <div class="kb-info">
                        <div class="kb-name">æŠ€æœ¯æ–‡æ¡£åº“</div>
                        <div class="kb-meta">89ä¸ªæ–‡ä»¶ Â· 1å°æ—¶å‰</div>
                    </div>
                </div>

                <div class="kb-item" onclick="selectKB(this, 'äº§å“éœ€æ±‚æ–‡æ¡£', 'ğŸ“Š', 45)">
                    <span class="kb-icon">ğŸ“Š</span>
                    <div class="kb-info">
                        <div class="kb-name">äº§å“éœ€æ±‚æ–‡æ¡£</div>
                        <div class="kb-meta">45ä¸ªæ–‡ä»¶ Â· 3å¤©å‰</div>
                    </div>
                </div>

                <div class="kb-item" onclick="selectKB(this, 'è´¢åŠ¡æŠ¥è¡¨æ±‡æ€»', 'ğŸ“ˆ', 23)">
                    <span class="kb-icon">ğŸ“ˆ</span>
                    <div class="kb-info">
                        <div class="kb-name">è´¢åŠ¡æŠ¥è¡¨æ±‡æ€»</div>
                        <div class="kb-meta">23ä¸ªæ–‡ä»¶ Â· 2å‘¨å‰</div>
                    </div>
                </div>

                <div class="kb-item" onclick="selectKB(this, 'å¸‚åœºè¥é”€èµ„æ–™', 'ğŸ“¢', 67)">
                    <span class="kb-icon">ğŸ“¢</span>
                    <div class="kb-info">
                        <div class="kb-name">å¸‚åœºè¥é”€èµ„æ–™</div>
                        <div class="kb-meta">67ä¸ªæ–‡ä»¶ Â· 5å¤©å‰</div>
                    </div>
                </div>

                <div class="kb-item" onclick="selectKB(this, 'äººåŠ›èµ„æºæ–‡æ¡£', 'ğŸ‘¥', 34)">
                    <span class="kb-icon">ğŸ‘¥</span>
                    <div class="kb-info">
                        <div class="kb-name">äººåŠ›èµ„æºæ–‡æ¡£</div>
                        <div class="kb-meta">34ä¸ªæ–‡ä»¶ Â· 1å‘¨å‰</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸­é—´é¢æ¿ï¼šæ–‡ä»¶åˆ—è¡¨æˆ–æ–‡æ¡£å†…å®¹ -->
        <div class="middle-panel" id="middlePanel">
            <div class="middle-header">
                <div>
                    <div class="middle-title" id="middleTitle">å…¬å¸æ³•åŠ¡å…±äº«åº“</div>
                    <div class="breadcrumb">
                        <span class="breadcrumb-link" onclick="showWelcome()">çŸ¥è¯†åº“</span>
                        <span class="breadcrumb-separator">â€º</span>
                        <span id="currentKB">å…¬å¸æ³•åŠ¡å…±äº«åº“</span>
                        <span class="breadcrumb-separator" id="fileSeparator" style="display: none;">â€º</span>
                        <span id="currentFile" style="display: none;"></span>
                    </div>
                </div>
                <div class="middle-actions">
                    <button class="action-btn" id="backBtn" onclick="backToFileList()" style="display: none;">
                        <span>â†</span>
                        <span>è¿”å›åˆ—è¡¨</span>
                    </button>
                </div>
            </div>

            <div class="middle-content" id="middleContent">
                <!-- æ–‡ä»¶åˆ—è¡¨è§†å›¾ -->
                <div class="file-grid" id="fileListView">
                    <!-- ç¤ºä¾‹æ–‡ä»¶ -->
                    <div class="file-card" onclick="openDocument('æ ‡å‡†åˆåŒèŒƒæœ¬2023ç‰ˆ.pdf', 'ğŸ“„', '2.3MB')">
                        <div class="file-card-icon">ğŸ“„</div>
                        <div class="file-card-name">æ ‡å‡†åˆåŒèŒƒæœ¬2023ç‰ˆ.pdf</div>
                        <div class="file-card-meta">
                            <span>2.3MB</span>
                            <span>2å¤©å‰</span>
                        </div>
                    </div>

                    <div class="file-card" onclick="openDocument('æ³•å¾‹åˆè§„æŒ‡å—.pdf', 'ğŸ“„', '1.8MB')">
                        <div class="file-card-icon">ğŸ“„</div>
                        <div class="file-card-name">æ³•å¾‹åˆè§„æŒ‡å—.pdf</div>
                        <div class="file-card-meta">
                            <span>1.8MB</span>
                            <span>3å¤©å‰</span>
                        </div>
                    </div>

                    <div class="file-card" onclick="openDocument('çŸ¥è¯†äº§æƒä¿æŠ¤æ¡æ¬¾.docx', 'ğŸ“', '456KB')">
                        <div class="file-card-icon">ğŸ“</div>
                        <div class="file-card-name">çŸ¥è¯†äº§æƒä¿æŠ¤æ¡æ¬¾.docx</div>
                        <div class="file-card-meta">
                            <span>456KB</span>
                            <span>1å‘¨å‰</span>
                        </div>
                    </div>

                    <div class="file-card" onclick="openDocument('åŠ³åŠ¨åˆåŒæ¨¡æ¿.pdf', 'ğŸ“„', '1.2MB')">
                        <div class="file-card-icon">ğŸ“„</div>
                        <div class="file-card-name">åŠ³åŠ¨åˆåŒæ¨¡æ¿.pdf</div>
                        <div class="file-card-meta">
                            <span>1.2MB</span>
                            <span>5å¤©å‰</span>
                        </div>
                    </div>

                    <div class="file-card" onclick="openDocument('å•†ä¸šç§˜å¯†ä¿æŠ¤åè®®.pdf', 'ğŸ“„', '980KB')">
                        <div class="file-card-icon">ğŸ“„</div>
                        <div class="file-card-name">å•†ä¸šç§˜å¯†ä¿æŠ¤åè®®.pdf</div>
                        <div class="file-card-meta">
                            <span>980KB</span>
                            <span>1å‘¨å‰</span>
                        </div>
                    </div>

                    <div class="file-card" onclick="openDocument('è‚¡æƒè½¬è®©åè®®æ¨¡æ¿.docx', 'ğŸ“', '1.5MB')">
                        <div class="file-card-icon">ğŸ“</div>
                        <div class="file-card-name">è‚¡æƒè½¬è®©åè®®æ¨¡æ¿.docx</div>
                        <div class="file-card-meta">
                            <span>1.5MB</span>
                            <span>2å‘¨å‰</span>
                        </div>
                    </div>
                </div>

                <!-- æ–‡æ¡£å†…å®¹è§†å›¾ï¼ˆåˆå§‹éšè—ï¼‰ -->
                <div class="document-view" id="documentView" style="display: none;">
                    <div class="document-header">
                        <div class="document-title">
                            <span class="document-icon" id="docIcon">ğŸ“„</span>
                            <span id="docTitle">æ ‡å‡†åˆåŒèŒƒæœ¬2023ç‰ˆ.pdf</span>
                        </div>
                        <div class="document-meta">
                            <div class="meta-item">
                                <span>ğŸ“¦</span>
                                <span id="docSize">2.3MB</span>
                            </div>
                            <div class="meta-item">
                                <span>ğŸ“š</span>
                                <span id="docKB">å…¬å¸æ³•åŠ¡å…±äº«åº“</span>
                            </div>
                            <div class="meta-item">
                                <span>ğŸ•’</span>
                                <span>2å¤©å‰æ›´æ–°</span>
                            </div>
                        </div>
                    </div>

                    <div class="document-content" id="docContent">
                        <h1>ç¬¬ä¸€ç«  æ€»åˆ™</h1>
                        <p>æœ¬åˆåŒèŒƒæœ¬æ—¨åœ¨ä¸ºä¼ä¸šæä¾›æ ‡å‡†åŒ–çš„åˆåŒæ¨¡æ¿ï¼Œç¡®ä¿åˆåŒæ¡æ¬¾çš„å®Œæ•´æ€§å’Œåˆè§„æ€§ã€‚æœ¬æ–‡æ¡£åŒ…å«äº†å¸¸è§å•†ä¸šåˆåŒçš„æ ¸å¿ƒæ¡æ¬¾å’Œæ³¨æ„äº‹é¡¹ã€‚</p>

                        <h2>1.1 åˆåŒç›®çš„</h2>
                        <p>æ˜ç¡®åˆåŒåŒæ–¹çš„æƒåˆ©ä¹‰åŠ¡å…³ç³»ï¼Œè§„èŒƒäº¤æ˜“è¡Œä¸ºï¼Œé¢„é˜²å’Œå‡å°‘åˆåŒçº çº·ã€‚æœ¬èŒƒæœ¬é€‚ç”¨äºä¸€èˆ¬å•†ä¸šäº¤æ˜“åœºæ™¯ï¼Œå…·ä½“ä½¿ç”¨æ—¶éœ€æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ã€‚</p>

                        <h2>1.2 é€‚ç”¨èŒƒå›´</h2>
                        <p>æœ¬èŒƒæœ¬é€‚ç”¨äºè´§ç‰©ä¹°å–ã€æœåŠ¡æä¾›ã€æŠ€æœ¯è½¬è®©ç­‰å¤šç§å•†ä¸šåœºæ™¯ã€‚ä½¿ç”¨è€…åº”å½“æ ¹æ®äº¤æ˜“çš„å…·ä½“æ€§è´¨é€‰æ‹©åˆé€‚çš„æ¡æ¬¾ï¼Œå¹¶åœ¨å¿…è¦æ—¶å’¨è¯¢ä¸“ä¸šæ³•å¾‹äººå£«ã€‚</p>

                        <h1>ç¬¬äºŒç«  åˆåŒä¸»ä½“</h1>
                        <p>åˆåŒä¸»ä½“æ˜¯æŒ‡åˆåŒçš„å½“äº‹äººï¼ŒåŒ…æ‹¬ç”²æ–¹ï¼ˆä¾›åº”æ–¹/æœåŠ¡æ–¹ï¼‰å’Œä¹™æ–¹ï¼ˆéœ€æ±‚æ–¹/å®¢æˆ·æ–¹ï¼‰ã€‚åŒæ–¹åº”å½“å…·å¤‡ç›¸åº”çš„æ°‘äº‹æƒåˆ©èƒ½åŠ›å’Œæ°‘äº‹è¡Œä¸ºèƒ½åŠ›ã€‚</p>

                        <h2>2.1 ä¸»ä½“èµ„æ ¼</h2>
                        <p>ç”²æ–¹åº”ä¸ºä¾æ³•è®¾ç«‹å¹¶æœ‰æ•ˆå­˜ç»­çš„ä¼ä¸šæ³•äººæˆ–å…¶ä»–ç»„ç»‡ï¼Œå…·æœ‰å±¥è¡Œæœ¬åˆåŒçš„èƒ½åŠ›å’Œèµ„è´¨ã€‚ä¹™æ–¹åŒæ ·åº”å…·å¤‡åˆæ³•çš„ä¸»ä½“èµ„æ ¼ï¼Œæœ‰æƒç­¾ç½²å’Œå±¥è¡Œæœ¬åˆåŒã€‚</p>

                        <h2>2.2 æˆæƒä»£è¡¨</h2>
                        <p>ç­¾ç½²åˆåŒçš„ä»£è¡¨åº”å½“å…·æœ‰ç›¸åº”çš„æˆæƒï¼Œå¹¶èƒ½å¤Ÿä»£è¡¨å…¶æ‰€åœ¨ç»„ç»‡è¡Œä½¿æƒåˆ©å’Œæ‰¿æ‹…ä¹‰åŠ¡ã€‚å¿…è¦æ—¶åº”æä¾›æˆæƒå§”æ‰˜ä¹¦ç­‰è¯æ˜æ–‡ä»¶ã€‚</p>

                        <h1>ç¬¬ä¸‰ç«  åˆåŒå†…å®¹</h1>
                        <p>åˆåŒå†…å®¹åº”å½“æ˜ç¡®ã€å…·ä½“ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæ ‡çš„ç‰©ã€æ•°é‡ã€è´¨é‡ã€ä»·æ¬¾ã€å±¥è¡ŒæœŸé™ã€å±¥è¡Œæ–¹å¼ã€è¿çº¦è´£ä»»ç­‰æ ¸å¿ƒæ¡æ¬¾ã€‚</p>

                        <h2>3.1 æ ‡çš„ç‰©</h2>
                        <p>æ˜ç¡®çº¦å®šäº¤æ˜“çš„æ ‡çš„ç‰©ï¼ŒåŒ…æ‹¬åç§°ã€è§„æ ¼ã€å‹å·ã€æŠ€æœ¯å‚æ•°ç­‰è¯¦ç»†ä¿¡æ¯ã€‚å¯¹äºæœåŠ¡ç±»åˆåŒï¼Œåº”è¯¦ç»†æè¿°æœåŠ¡çš„å†…å®¹ã€æ ‡å‡†å’ŒéªŒæ”¶æ–¹å¼ã€‚</p>

                        <h2>3.2 ä»·æ¬¾ä¸æ”¯ä»˜</h2>
                        <p>çº¦å®šåˆåŒæ€»ä»·æ¬¾ã€æ”¯ä»˜æ–¹å¼ã€æ”¯ä»˜æ—¶é—´å’Œæ”¯ä»˜æ¡ä»¶ã€‚å¦‚æ¶‰åŠåˆ†æœŸä»˜æ¬¾ï¼Œåº”æ˜ç¡®å„æœŸçš„é‡‘é¢å’Œæ”¯ä»˜æ—¶é—´èŠ‚ç‚¹ã€‚</p>

                        <h2>3.3 å±¥è¡ŒæœŸé™</h2>
                        <p>æ˜ç¡®åˆåŒçš„å±¥è¡ŒæœŸé™ï¼ŒåŒ…æ‹¬å¼€å§‹æ—¶é—´å’Œå®Œæˆæ—¶é—´ã€‚å¯¹äºåˆ†é˜¶æ®µå±¥è¡Œçš„åˆåŒï¼Œåº”åˆ—æ˜å„é˜¶æ®µçš„æ—¶é—´èŠ‚ç‚¹å’Œäº¤ä»˜ç‰©ã€‚</p>

                        <h1>ç¬¬å››ç«  è¿çº¦è´£ä»»</h1>
                        <p>è¿çº¦è´£ä»»æ˜¯ä¿éšœåˆåŒå±¥è¡Œçš„é‡è¦æ¡æ¬¾ï¼Œåº”å½“æ˜ç¡®çº¦å®šè¿çº¦æƒ…å½¢ã€è¿çº¦è´£ä»»çš„æ‰¿æ‹…æ–¹å¼å’Œè¿çº¦é‡‘çš„è®¡ç®—æ–¹æ³•ã€‚</p>

                        <h2>4.1 è¿çº¦æƒ…å½¢</h2>
                        <p>è¯¦ç»†åˆ—ä¸¾å¯èƒ½æ„æˆè¿çº¦çš„å„ç§æƒ…å½¢ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºå»¶è¿Ÿå±¥è¡Œã€è´¨é‡ä¸ç¬¦ã€æ‹’ç»å±¥è¡Œç­‰ã€‚åº”å½“å°½å¯èƒ½å…·ä½“å’Œæ˜ç¡®ï¼Œé¿å…äº§ç”Ÿæ­§ä¹‰ã€‚</p>

                        <h2>4.2 è¿çº¦è´£ä»»</h2>
                        <p>çº¦å®šè¿çº¦æ–¹åº”å½“æ‰¿æ‹…çš„è´£ä»»ï¼Œå¯ä»¥æ˜¯ç»§ç»­å±¥è¡Œã€é‡‡å–è¡¥æ•‘æªæ–½ã€èµ”å¿æŸå¤±ã€æ”¯ä»˜è¿çº¦é‡‘ç­‰ã€‚è¿çº¦é‡‘çš„æ•°é¢åº”å½“åˆç†ï¼Œä¸å¾—è¿‡åˆ†é«˜äºå®é™…æŸå¤±ã€‚</p>

                        <h1>ç¬¬äº”ç«  äº‰è®®è§£å†³</h1>
                        <p>çº¦å®šäº‰è®®è§£å†³çš„æ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©åå•†ã€è°ƒè§£ã€ä»²è£æˆ–è¯‰è®¼ã€‚æ˜ç¡®äº‰è®®è§£å†³çš„ç®¡è¾–åœ°å’Œé€‚ç”¨æ³•å¾‹ã€‚</p>

                        <h2>5.1 åå•†ä¸è°ƒè§£</h2>
                        <p>é¼“åŠ±åŒæ–¹åœ¨å‘ç”Ÿäº‰è®®æ—¶é¦–å…ˆé€šè¿‡å‹å¥½åå•†è§£å†³ã€‚åå•†ä¸æˆçš„ï¼Œå¯ä»¥è¯·æ±‚æœ‰å…³éƒ¨é—¨è¿›è¡Œè°ƒè§£ã€‚</p>

                        <h2>5.2 ä»²è£ä¸è¯‰è®¼</h2>
                        <p>å¦‚åå•†å’Œè°ƒè§£å‡ä¸èƒ½è§£å†³äº‰è®®ï¼Œå¯ä»¥é€‰æ‹©ä»²è£æˆ–å‘æœ‰ç®¡è¾–æƒçš„äººæ°‘æ³•é™¢æèµ·è¯‰è®¼ã€‚åº”æ˜ç¡®çº¦å®šä»²è£æœºæ„æˆ–ç®¡è¾–æ³•é™¢ã€‚</p>
                    </div>

                    <div class="ask-btn-container">
                        <button class="ask-xiaocai-btn" onclick="openChatSidebar()">
                            <span>ğŸ¤–</span>
                            <span>é—®é—®å°è”¡</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§é—®ç­”ä¾§è¾¹æ  -->
        <div class="chat-sidebar" id="chatSidebar">
            <div class="chat-header">
                <div class="chat-title-area">
                    <div class="chat-title">
                        <span>ğŸ¤–</span>
                        <span>å°è”¡åŠ©æ‰‹</span>
                    </div>
                    <div class="chat-subtitle" id="chatDocName">æ­£åœ¨æŸ¥çœ‹ï¼šæ ‡å‡†åˆåŒèŒƒæœ¬2023ç‰ˆ.pdf</div>
                </div>
                <button class="close-chat-btn" onclick="closeChatSidebar()">âœ•</button>
            </div>

            <div class="chat-messages" id="chatMessages">
                <div class="message">
                    <div class="message-avatar bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            æ‚¨å¥½ï¼æˆ‘æ˜¯å°è”¡ï¼Œæ‚¨çš„æ™ºèƒ½æ–‡æ¡£åŠ©æ‰‹ã€‚æˆ‘å·²ç»å‡†å¤‡å¥½å›ç­”å…³äºè¿™ä»½æ–‡æ¡£çš„ä»»ä½•é—®é¢˜äº†ã€‚æ‚¨å¯ä»¥é—®æˆ‘ï¼š<br><br>
                            â€¢ è¿™ä»½æ–‡æ¡£çš„æ ¸å¿ƒå†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ<br>
                            â€¢ å¸®æˆ‘æ€»ç»“å…³é”®è¦ç‚¹<br>
                            â€¢ æ–‡æ¡£ä¸­çš„æŸä¸ªæ¡æ¬¾æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
                        </div>
                        <div class="message-time">åˆšåˆš</div>
                    </div>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="chat-input-wrapper">
                    <textarea 
                        class="chat-input" 
                        id="chatInput" 
                        placeholder="è¯¢é—®å…³äºæ–‡æ¡£çš„é—®é¢˜..." 
                        rows="1"
                        onkeydown="handleChatKeydown(event)"
                    ></textarea>
                    <button class="chat-send-btn" onclick="sendChatMessage()">
                        â¤
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentKB = 'å…¬å¸æ³•åŠ¡å…±äº«åº“';
        let currentDoc = '';

        // é€‰æ‹©çŸ¥è¯†åº“
        function selectKB(element, kbName, icon, fileCount) {
            // æ›´æ–°æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.kb-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');

            currentKB = kbName;
            currentDoc = '';

            // æ›´æ–°æ ‡é¢˜
            document.getElementById('middleTitle').textContent = kbName;
            document.getElementById('currentKB').textContent = kbName;
            document.getElementById('fileSeparator').style.display = 'none';
            document.getElementById('currentFile').style.display = 'none';

            // æ˜¾ç¤ºæ–‡ä»¶åˆ—è¡¨ï¼Œéšè—æ–‡æ¡£è§†å›¾
            document.getElementById('fileListView').style.display = 'grid';
            document.getElementById('documentView').style.display = 'none';
            document.getElementById('backBtn').style.display = 'none';

            // å…³é—­èŠå¤©ä¾§è¾¹æ 
            closeChatSidebar();

            // è¿™é‡Œå¯ä»¥åŠ è½½å¯¹åº”çŸ¥è¯†åº“çš„æ–‡ä»¶åˆ—è¡¨
            console.log(`åŠ è½½çŸ¥è¯†åº“: ${kbName}, æ–‡ä»¶æ•°: ${fileCount}`);
        }

        // æ‰“å¼€æ–‡æ¡£
        function openDocument(fileName, icon, size) {
            currentDoc = fileName;

            // æ›´æ–°é¢åŒ…å±‘
            document.getElementById('middleTitle').textContent = fileName;
            document.getElementById('fileSeparator').style.display = 'inline';
            document.getElementById('currentFile').textContent = fileName;
            document.getElementById('currentFile').style.display = 'inline';

            // æ›´æ–°æ–‡æ¡£ä¿¡æ¯
            document.getElementById('docIcon').textContent = icon;
            document.getElementById('docTitle').textContent = fileName;
            document.getElementById('docSize').textContent = size;
            document.getElementById('docKB').textContent = currentKB;

            // åˆ‡æ¢è§†å›¾
            document.getElementById('fileListView').style.display = 'none';
            document.getElementById('documentView').style.display = 'block';
            document.getElementById('backBtn').style.display = 'flex';

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            document.getElementById('middleContent').scrollTop = 0;
        }

        // è¿”å›æ–‡ä»¶åˆ—è¡¨
        function backToFileList() {
            currentDoc = '';

            // æ›´æ–°æ ‡é¢˜
            document.getElementById('middleTitle').textContent = currentKB;
            document.getElementById('fileSeparator').style.display = 'none';
            document.getElementById('currentFile').style.display = 'none';

            // åˆ‡æ¢è§†å›¾
            document.getElementById('fileListView').style.display = 'grid';
            document.getElementById('documentView').style.display = 'none';
            document.getElementById('backBtn').style.display = 'none';

            // å…³é—­èŠå¤©ä¾§è¾¹æ 
            closeChatSidebar();
        }

        // æ‰“å¼€èŠå¤©ä¾§è¾¹æ 
        function openChatSidebar() {
            const sidebar = document.getElementById('chatSidebar');
            const middlePanel = document.getElementById('middlePanel');
            
            sidebar.classList.add('show');
            middlePanel.classList.add('with-chat');

            // æ›´æ–°èŠå¤©æ ‡é¢˜
            document.getElementById('chatDocName').textContent = `æ­£åœ¨æŸ¥çœ‹ï¼š${currentDoc}`;

            // æ¸…ç©ºä¹‹å‰çš„å¯¹è¯ï¼Œä¿ç•™æ¬¢è¿æ¶ˆæ¯
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = `
                <div class="message">
                    <div class="message-avatar bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-bubble">
                            æ‚¨å¥½ï¼æˆ‘æ˜¯å°è”¡ï¼Œæ‚¨çš„æ™ºèƒ½æ–‡æ¡£åŠ©æ‰‹ã€‚æˆ‘å·²ç»å‡†å¤‡å¥½å›ç­”å…³äºã€Œ${currentDoc}ã€çš„ä»»ä½•é—®é¢˜äº†ã€‚æ‚¨å¯ä»¥é—®æˆ‘ï¼š<br><br>
                            â€¢ è¿™ä»½æ–‡æ¡£çš„æ ¸å¿ƒå†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿ<br>
                            â€¢ å¸®æˆ‘æ€»ç»“å…³é”®è¦ç‚¹<br>
                            â€¢ æ–‡æ¡£ä¸­çš„æŸä¸ªæ¡æ¬¾æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
                        </div>
                        <div class="message-time">åˆšåˆš</div>
                    </div>
                </div>
            `;
        }

        // å…³é—­èŠå¤©ä¾§è¾¹æ 
        function closeChatSidebar() {
            const sidebar = document.getElementById('chatSidebar');
            const middlePanel = document.getElementById('middlePanel');
            
            sidebar.classList.remove('show');
            middlePanel.classList.remove('with-chat');
        }

        // å‘é€èŠå¤©æ¶ˆæ¯
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;

            const messagesContainer = document.getElementById('chatMessages');
            const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            const userMsg = document.createElement('div');
            userMsg.className = 'message user';
            userMsg.innerHTML = `
                <div class="message-avatar user">ğŸ‘¤</div>
                <div class="message-content">
                    <div class="message-bubble">${message}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            messagesContainer.appendChild(userMsg);

            // æ¸…ç©ºè¾“å…¥æ¡†
            input.value = '';
            input.style.height = 'auto';

            // æ»šåŠ¨åˆ°åº•éƒ¨
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            // æ¨¡æ‹ŸAIå›å¤
            setTimeout(() => {
                const responses = [
                    {
                        text: `æ ¹æ®ã€Œ${currentDoc}ã€çš„å†…å®¹ï¼Œæˆ‘ä¸ºæ‚¨æ‰¾åˆ°äº†ä»¥ä¸‹ä¿¡æ¯ï¼š\n\nè¿™ä»½æ–‡æ¡£ä¸»è¦æ¶µç›–äº†åˆåŒçš„åŸºæœ¬è¦ç´ å’Œæ³¨æ„äº‹é¡¹ã€‚æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†åˆåŒä¸»ä½“ã€åˆåŒå†…å®¹ã€å±¥è¡Œæ–¹å¼ã€è¿çº¦è´£ä»»ç­‰æ ¸å¿ƒæ¡æ¬¾ï¼Œä¸ºä¼ä¸šæä¾›äº†æ ‡å‡†åŒ–çš„åˆåŒæ¨¡æ¿ã€‚`,
                        reference: 'å‚è€ƒï¼šç¬¬ä¸€ç«  æ€»åˆ™ã€ç¬¬ä¸‰ç«  åˆåŒå†…å®¹'
                    },
                    {
                        text: `è®©æˆ‘ä¸ºæ‚¨æ€»ç»“ä¸€ä¸‹è¦ç‚¹ï¼š\n\n1. æ˜ç¡®äº†åˆåŒåŒæ–¹çš„ä¸»ä½“èµ„æ ¼è¦æ±‚\n2. è¯¦ç»†è§„å®šäº†åˆåŒçš„æ ¸å¿ƒæ¡æ¬¾\n3. å¼ºè°ƒäº†è¿çº¦è´£ä»»çš„é‡è¦æ€§\n4. æä¾›äº†äº‰è®®è§£å†³çš„å¤šç§é€”å¾„\n5. ç¡®ä¿äº†åˆåŒçš„åˆè§„æ€§å’Œå¯æ‰§è¡Œæ€§`,
                        reference: 'å‚è€ƒï¼šç¬¬äºŒç« è‡³ç¬¬äº”ç« '
                    },
                    {
                        text: `å…³äºè¿™ä¸ªé—®é¢˜ï¼Œæ–‡æ¡£ä¸­æœ‰æ˜ç¡®è¯´æ˜ï¼š\n\nè¿çº¦è´£ä»»æ˜¯ä¿éšœåˆåŒå±¥è¡Œçš„é‡è¦æ¡æ¬¾ã€‚è¿çº¦æ–¹åº”å½“æ‰¿æ‹…ç»§ç»­å±¥è¡Œã€é‡‡å–è¡¥æ•‘æªæ–½ã€èµ”å¿æŸå¤±æˆ–æ”¯ä»˜è¿çº¦é‡‘ç­‰è´£ä»»ã€‚è¿çº¦é‡‘çš„æ•°é¢åº”å½“åˆç†ï¼Œä¸å¾—è¿‡åˆ†é«˜äºå®é™…æŸå¤±ã€‚`,
                        reference: 'å‚è€ƒï¼šç¬¬å››ç«  è¿çº¦è´£ä»»'
                    }
                ];
                
                const response = responses[Math.floor(Math.random() * responses.length)];
                
                const botMsg = document.createElement('div');
                botMsg.className = 'message';
                botMsg.innerHTML = `
                    <div class="message-avatar bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-bubble">${response.text.replace(/\n/g, '<br>')}</div>
                        <div class="message-reference">ğŸ“ ${response.reference}</div>
                        <div class="message-time">${time}</div>
                    </div>
                `;
                messagesContainer.appendChild(botMsg);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 800);
        }

        // å¤„ç†å›è½¦å‘é€
        function handleChatKeydown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendChatMessage();
            }
        }

        // è‡ªåŠ¨è°ƒæ•´è¾“å…¥æ¡†é«˜åº¦
        document.getElementById('chatInput').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
        });
    </script>
</body>
</html>